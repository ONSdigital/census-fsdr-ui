{% macro fsdrSearch(params) %}
    {% from 'components/radios/_macro.njk' import onsRadios %}
    {% from "components/select/_macro.njk" import onsSelect %}
    {% from 'components/question/_macro.njk' import onsQuestion %}
    {% from "components/input/_macro.njk" import onsInput %}
    {% from 'components/button/_macro.njk' import onsButton %}
    {% from 'components/panel/_macro.njk' import onsPanel %}
    {% from "components/label/_macro.njk" import onsLabel %}

    {% set action = params.action %}

    {% set search_button_text = 'Search' %}

    {% set previousSurnameFilter = '' %}
    {% set previousArea = '' %}
    {% if params.previous_surname_filter %}
        {% set previousSurnameFilter = params.previous_surname_filter %}
    {% endif %}
    {% if params.previous_area %}
        {% set previousArea = params.previous_area %}
    {% endif %}

    {% if params.index_search == True %}
        <table>
            <tr>
                {{
                    onsLabel({
                        "id": 'label',
                        "for": "some-input",
                        "text": 'Filter field workers'
                    })
                }}
                <td>
                    {{
                        onsSelect({
                            "id": "select",
                            'name': "job_role_select",
                            "label": {
                                "text": "Job Role"
                            },
                            "options": params.distinct_job_roles
                        })
                    }}
                </td>
                <td>
                    {{
                        onsInput({
                            "id": "text",
                            'name': "filter_surname",
                            "label": {
                                "text": "Worker Surname"
                            },
                            "value": params.previous_surname_filter
                        })
                    }}
                </td>
                <td>
                    {{
                        onsInput({
                            "id": "text",
                            'name': "filter_area",
                            "label": {
                                "text": "Area"
                            },
                            "value": params.previous_area
                        })
                    }}
                </td>
                {{
                    onsInput({
                        "type": "hidden",
                        "classes": "u-d-no",
                        "id": "adlocation",
                        "name": "adlocation",
                        "value": adlocation,
                        "label": {
                            "text": "Enter some text",
                            "classes": "u-d-no"
                        }
                    })
                }}
            </tr>
         <table>
         {{
            onsInput({
                "type": "hidden",
                "classes": "u-d-no",
                "id": "indexsearch",
                "name": "indexsearch",
                "value": indexsearch,
                "label": {
                    "text": "Enter some text",
                    "classes": "u-d-no"
                }
            })
        }}

    {% elif params.index_search == "microservice" %}
        <table>
                {{
                    onsLabel({
                        "id": 'label',
                        "for": "some-input",
                        "text": "Filter " + params.microservice_title
                    })
                }}
		
		{% set col = namespace(value=-1) %}
		{% set row = namespace(value=0) %}
		{% set max_col = 2 %}
		{% for field in params.Fields %}
			{# Update  the col/row  values for the next  searchitem  #}
			{% if col.value == max_col %}
				{% set row.value = row.value + 1 %}
				{% set col.value = 0 %}
			{% else %}
				{% set col.value = col.value + 1 %}
			{% endif %}

			{# If a  new row  required, start "tablerow" #}
			{% if col.value == 0 %}
				</tr>
				<tr>
				<td>
			{% else %}
				<td>
			{% endif %}
			
			{# Code to generate actual searchui here #} 
			{% if field.search_type == "input_box" %}
				{{onsInput({
                            		"id"   : field.database_name,
					"name" : field.database_name,
					"label": { "text": field.column_name },
					"value": field.previous_value,   })}}
			{% elif field.search_type == "dropdown" %}
				{{onsSelect({
					"id"   : field.database_name,
					"name" : field.database_name,
					"label": { "text": field.column_name },
					"options": field.dropdown_options })}}
			{% endif %}

			{# End table row/element #} 
			{% if col.value == 0 %}
				<td>
				{{onsInput({
				"type": "hidden",
				"classes": "u-d-no",
				"id": "adlocation",
				"name": "adlocation",
				"value": adlocation,
				"label": {
				"text": "Enter some text",
				"classes": "u-d-no"}})}}
				</td>
			{% else %}
				</td>
			{% endif %}
		{% endfor %}
		</table>
		
    {% elif params.index_search == "device" %}
        <table>
            <tr>
                {{
                    onsLabel({
                        "id": 'label',
                        "for": "some-input",
                        "text": "Filter Device Table"
                    })
                }}

                <td>
                    {{
                        onsSelect({
                            "id": "device_sent",
                            'name': "device_sent",
                            "label": {
                                "text": "Device Sent"
                            },
                            "options":  params.device_sent_options 
 
                        })
                    }}
                </td>

                <td>
                    {{
                        onsInput({
                            "id": "device_id",
                            'name': "device_id",
                            "label": {
                                "text": "Device  ID"
                            },
                            "value": params.previous_device_id
                        })
                    }}
                </td>
                <td>
                    {{
                        onsInput({
                            "id": "field_device_phone_number",
                            'name': "field_device_phone_number",
                            "label": {
                                "text": "Device Phone Number"
                            },
                            "value": params.previous_field_device_phone_number
                        })
                    }}
                </td>
                {{
                    onsInput({
                        "type": "hidden",
                        "classes": "u-d-no",
                        "id": "adlocation",
                        "name": "adlocation",
                        "value": adlocation,
                        "label": {
                            "text": "Enter some text",
                            "classes": "u-d-no"
                        }
                    })
                }}
        </tr>
	<tr>
                <td>
                    {{
                        onsSelect({
                            "id": "device_type",
                            'name': "device_type",
                            "label": {
                                "text": "Device Type"
                            },
                            "options":params.device_type_options 
 
                        })
                    }}
                </td>
		<td>
                    {{
                        onsInput({
                            "id": "ons_id",
                            'name': "ons_id",
                            "label": {
                                "text": "ONS ID"
                            },
                            "value": params.previous_ons_id
                        })
                    }}
		</td>

	</tr>
         <table>
         {{
            onsInput({
                "type": "hidden",
                "classes": "u-d-no",
                "id": "indexsearch",
                "name": "indexsearch",
                "value": indexsearch,
                "label": {
                    "text": "Enter some text",
                    "classes": "u-d-no"
                }
            })
        }}


    {% elif params.index_search == "IAT" %}
        <table>
            <tr>
                {{
                    onsLabel({
                        "id": 'label',
                        "for": "some-input",
                        "text": "Filter Interface Action Table"
                    })
                }}

                <td>
                    {{
                        onsSelect({
                            "id": "select",
                            'name': "job_role_select",
                            "label": {
                                "text": "Job Role"
                            },
                            "options": params.distinct_job_roles
                        })
                    }}
                </td>

                <td>
                    {{
                        onsInput({
                            "id": "ons_id",
                            'name': "ons_id",
                            "label": {
                                "text": "ONS ID"
                            },
                            "value": params.previous_ons_id
                        })
                    }}
                </td>
                <td>
                    {{
                        onsInput({
                            "id": "employee_id",
                            'name': "employee_id",
                            "label": {
                                "text": "Employee ID"
                            },
                            "value": params.previous_employee_id
                        })
                    }}
                </td>
                {{
                    onsInput({
                        "type": "hidden",
                        "classes": "u-d-no",
                        "id": "adlocation",
                        "name": "adlocation",
                        "value": adlocation,
                        "label": {
                            "text": "Enter some text",
                            "classes": "u-d-no"
                        }
                    })
                }}
        </tr>
	<tr>
                <td>
                    {{
                        onsSelect({
                            "id": "gsuiteselect",
                            'name': "gsuite",
                            "label": {
                                "text": "Gsuite Status"
                            },
                            "options": params.iat_options.get('gsuite')
                        })
                    }}
                </td>
                <td>
                    {{
                        onsSelect({
                            "id": "select",
                            'name': "xma",
                            "label": {
                                "text": "XMA Status"
                            },
                            "options": params.iat_options.get('xma')
                        })
                    }}
                </td>
                <td>
                    {{
                        onsSelect({
                            "id": "select",
                            'name': "granby",
                            "label": {
                                "text": "Granby Status"
                            },
                            "options": params.iat_options.get('granby')
                        })
                    }}
                </td>

	</tr>
	<tr>
	      <td>
                    {{
                        onsSelect({
                            "id": "select",
                            'name': "loneWorker",
                            "label": {
                                "text": "Lone Worker Status"
                            },
                            "options": params.iat_options.get('loneWorker')
                        })
                    }}
                </td>
	      <td>
                    {{
                        onsSelect({
                            "id": "select",
                            'name': "serviceNow",
                            "label": {
                                "text": "Service Now Status"
                            },
                            "options": params.iat_options.get('serviceNow')
                        })
                    }}
                </td>
		<td>
                    {{
                        onsSelect({
                            "id": "select_setup",
                            'name': "setup",
                            "label": {
                                "text": "Setup"
                            },
                            "options": params.boolean_dropdown,
                        })
                    }}


               </td>

	</tr>

         <table>
         {{
            onsInput({
                "type": "hidden",
                "classes": "u-d-no",
                "id": "indexsearch",
                "name": "indexsearch",
                "value": indexsearch,
                "label": {
                    "text": "Enter some text",
                    "classes": "u-d-no"
                }
            })
        }}
    {% else %}
        {{
            onsInput({
                "id": "text",
                'name': "filter_firstname",
                "label": {
                    "text": "First Name"
                }
            })
        }}
        {{
            onsInput({
                "id": "text",
                'name': "filter_surname",
                "label": {
                    "text": "Surname"
                }
            })
        }}
        {{
            onsInput({
                'id': 'filter_email',
                'name': 'filter_email',
                'label': {
                    'text': 'ONS ID'
                }
            })
        }}
        {{
            onsInput({
                "id": "text",
                'name': "filter_badge",
                "label": {
                    "text": "ID Badge Number"
                }
            })
        }}
        {{
            onsInput({
                "id": "text",
                'name': "filter_area",
                "label": {
                    "text": "Area"
                }
            })
        }}
        {{
            onsSelect({
                "id": "select",
                'name': "job_role_select",
                "label": {
                    "text": "Job Role"
                },
                "options": params.distinct_job_roles
            })
        }}
        {{
            onsInput({
                "id": "text",
                'name': "filter_jobid",
                "label": {
                    "text": "Role ID"
                }
            })
        }}
        {{
            onsSelect({
                "id": "select",
                'name': "assignment_select",
                "label": {
                    "text": "Assignment Status"
                },
                "options": params.all_assignment_statuses
            })
        }}
    {% endif %}
    <br>
{% endmacro %}
